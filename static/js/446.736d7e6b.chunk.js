"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[446],{446:function(e,i,s){s.r(i),s.d(i,{default:function(){return Z}});var t=s(439),o=s(791),a=s(861),n=s(757),_=s.n(n),c={method:"GET",headers:{accept:"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlM2Q2ODBiNmUxZDYzZDQwZDAzOTYyZGI4MGUyYTFhMCIsInN1YiI6IjY0NjRjMmU2ZDA1YTAzMDExOWRlYzU2MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Q0ZQUwtEPrByjiIx7f7hGYHdbh5ojLcYEsIIKeW2RXE")}},m=function(){var e=(0,a.Z)(_().mark((function e(i){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.themoviedb.org/3/movie/".concat(i,"?language=en-US"),c).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)})));case 1:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}(),r=s(335),l=s(689),v=s(87),d=s(134),h=s(184),u="idle",f="panding",x="rejected",j="resolved",Z=function(){var e,i,s,a=(0,o.useState)(null!==(e=JSON.parse(window.localStorage.getItem("movie")))&&void 0!==e?e:{}),n=(0,t.Z)(a,2),_=n[0],c=n[1],Z=(0,o.useState)(""),b=(0,t.Z)(Z,2),p=b[0],k=b[1],N=(0,o.useState)(0),w=(0,t.Z)(N,2),g=w[0],I=w[1],S=(0,o.useState)(""),y=(0,t.Z)(S,2),J=y[0],U=y[1],C=(0,l.UO)().movieId,E=(0,o.useState)(u),G=(0,t.Z)(E,2),O=G[0],z=G[1],Y=(0,l.TH)(),W=(0,o.useRef)(null!==(i=null===(s=Y.state)||void 0===s?void 0:s.from)&&void 0!==i?i:"/");return(0,o.useEffect)((function(){z(f),C?m(C).then((function(e){if(!1!==e.success){c(e);var i=e.release_date;i&&k(i.slice(0,4));var s=(10*e.vote_average).toFixed();I(s);var t=e.genres,o=[];t&&t.forEach((function(e){var i=e.name;o.push(i),U(o.join(", "))})),z(j)}else z(x)})).catch((function(e){console.error(e),z(x)})):z(x)}),[C]),(0,o.useEffect)((function(){window.localStorage.setItem("movie",JSON.stringify(_))}),[_]),O===f?(0,h.jsx)("p",{className:r.Z.cast_text,children:"Loading..."}):O===j?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v.rU,{className:r.Z.movie_back_link,to:W.current,children:(0,h.jsxs)("button",{className:r.Z.movie_back,children:[(0,h.jsx)(d.kyg,{fill:"black",size:"12"}),"Go Back"]})}),(0,h.jsxs)("div",{className:r.Z.movie_card,children:[_.poster_path?(0,h.jsx)("img",{src:"".concat("https://image.tmdb.org/t/p/w500/").concat(_.poster_path),width:"300 px",alt:""}):(0,h.jsx)("b",{className:r.Z.banner_error,children:"Sorry, the banner was not found"}),(0,h.jsxs)("div",{className:r.Z.movie_inf,children:[(0,h.jsx)("h1",{className:r.Z.movie_title,children:"".concat(_.title,"(").concat(p,")")}),(0,h.jsxs)("p",{className:r.Z.movie_text,children:["User score: ",g,"%"]}),(0,h.jsx)("h2",{className:r.Z.movie_title2,children:"Overview"}),(0,h.jsx)("p",{className:r.Z.movie_text,children:_.overview}),(0,h.jsx)("h3",{className:r.Z.movie_title3,children:"Genres"}),(0,h.jsx)("p",{className:r.Z.movie_text,children:J})]})]}),(0,h.jsxs)("div",{className:r.Z.movie_add_inf,children:[(0,h.jsx)("p",{className:r.Z.movie_text,children:"Additional information"}),(0,h.jsxs)("ul",{className:r.Z.movie_list_addinf,children:[(0,h.jsx)("li",{className:r.Z.movie_item_addinf,children:(0,h.jsx)(v.rU,{className:r.Z.movie_link_addinf,to:"/movies/".concat(C,"/cast"),state:{from:Y},children:"Cast"})}),(0,h.jsx)("li",{className:r.Z.movie_item_addinf,children:(0,h.jsx)(v.rU,{className:r.Z.movie_link_addinf,to:"/movies/".concat(C,"/reviews"),state:{from:Y},children:"Rewies"})})]})]}),(0,h.jsx)(o.Suspense,{fallback:(0,h.jsx)("div",{children:"Loading..."}),children:(0,h.jsx)(l.j3,{})})]}):O===x?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(v.rU,{className:r.Z.movie_back_link,to:W.current,children:(0,h.jsxs)("button",{className:r.Z.movie_back,children:[(0,h.jsx)(d.kyg,{fill:"black",size:"12"}),"Go Back"]})}),(0,h.jsx)("b",{className:r.Z.movie_error,children:"Sorry, we don't have detailed information about this movie !!!"})]}):void 0}},335:function(e,i){i.Z={movies:"movies_movies__C2IhS",movies_form:"movies_movies_form__3llfX",movies_list:"movies_movies_list__ZnERL",movies_item:"movies_movies_item__PzG0R",movies_link:"movies_movies_link__qA01R",input:"movies_input__q8Mmu",btn_sub:"movies_btn_sub__x9hFi",movie_back_link:"movies_movie_back_link__ksJAE",movie_back:"movies_movie_back__+uJAC",movie_card:"movies_movie_card__8iCWL",movie_inf:"movies_movie_inf__TIsMQ",movie_title:"movies_movie_title__9X94c",movie_text:"movies_movie_text__Cejqn",movie_title2:"movies_movie_title2__PZhOD",movie_title3:"movies_movie_title3__Odxmw",banner_error:"movies_banner_error__bxWCl",movie_add_inf:"movies_movie_add_inf__km0bd",movie_list_addinf:"movies_movie_list_addinf__Xoj+5",movie_item_addinf:"movies_movie_item_addinf__ENGof",cast_item:"movies_cast_item__99oP3",cast_text:"movies_cast_text__BWYPW",cast_list:"movies_cast_list__uSqCr"}}}]);
//# sourceMappingURL=446.736d7e6b.chunk.js.map