"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[496],{496:function(e,i,t){t.r(i),t.d(i,{default:function(){return x}});var o=t(433),n=t(439),s=t(335),_=t(565),r=t(791),a=t(87),c=t(689),m=t(861),u=t(757),l=t.n(u),v={method:"GET",headers:{accept:"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlM2Q2ODBiNmUxZDYzZDQwZDAzOTYyZGI4MGUyYTFhMCIsInN1YiI6IjY0NjRjMmU2ZDA1YTAzMDExOWRlYzU2MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Q0ZQUwtEPrByjiIx7f7hGYHdbh5ojLcYEsIIKeW2RXE")}},f=function(){var e=(0,m.Z)(l().mark((function e(i){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.themoviedb.org/3/search/movie?query=".concat(i,"&include_adult=false&language=en-US&page=1"),v).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)})));case 1:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}(),d=t(184),h="idle",p="panding",Z="rejected",b="resolved",x=function(){var e,i,t=(0,_.a)().setId,m=(0,r.useState)(""),u=(0,n.Z)(m,2),l=u[0],v=u[1],x=(0,r.useState)(null!==(e=JSON.parse(window.localStorage.getItem("searchName")))&&void 0!==e?e:""),I=(0,n.Z)(x,2),j=I[0],k=I[1],N=(0,a.lr)(""),S=(0,n.Z)(N,2),w=S[0],g=S[1],y=(0,r.useState)(null!==(i=JSON.parse(window.localStorage.getItem("moviesSearch")))&&void 0!==i?i:[]),C=(0,n.Z)(y,2),J=C[0],E=C[1];console.log(w.get("query"));var O=(0,c.TH)(),Y=(0,r.useState)(h),W=(0,n.Z)(Y,2),z=W[0],D=W[1];return(0,r.useEffect)((function(){D(p),""!==j.trim()?f(j).then((function(e){E((0,o.Z)(e.results)),D(b)})).catch((function(e){console.error(e),D(Z)})):D(Z)}),[j]),(0,r.useEffect)((function(){window.localStorage.setItem("moviesSearch",JSON.stringify(J))}),[J]),(0,r.useEffect)((function(){window.localStorage.setItem("searchName",JSON.stringify(j))}),[j]),(0,d.jsxs)("div",{className:s.Z.movies,children:[(0,d.jsxs)("form",{className:s.Z.movies_form,children:[(0,d.jsx)("input",{className:s.Z.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movie name",onChange:function(e){v(e.currentTarget.value)},value:l}),(0,d.jsx)("button",{className:s.Z.btn_sub,type:"submit",onClick:function(e){e.preventDefault(),g({query:l}),k(l),v("")},children:"Search"})]}),z===p&&(0,d.jsx)("p",{className:s.Z.cast_text,children:"Loading..."}),z===b&&(0,d.jsx)("ul",{className:s.Z.movies_list,children:J.map((function(e){var i=e.id,o=e.title;return(0,d.jsx)("li",{className:s.Z.movies_item,onClick:function(){t(i)},children:(0,d.jsx)(a.rU,{className:s.Z.movies_link,to:"/movies/".concat(i),state:{from:O},children:o})},i)}))})]})}},335:function(e,i){i.Z={movies:"movies_movies__C2IhS",movies_form:"movies_movies_form__3llfX",movies_list:"movies_movies_list__ZnERL",movies_item:"movies_movies_item__PzG0R",movies_link:"movies_movies_link__qA01R",input:"movies_input__q8Mmu",btn_sub:"movies_btn_sub__x9hFi",movie_back_link:"movies_movie_back_link__ksJAE",movie_back:"movies_movie_back__+uJAC",movie_card:"movies_movie_card__8iCWL",movie_inf:"movies_movie_inf__TIsMQ",movie_title:"movies_movie_title__9X94c",movie_text:"movies_movie_text__Cejqn",movie_title2:"movies_movie_title2__PZhOD",movie_title3:"movies_movie_title3__Odxmw",banner_error:"movies_banner_error__bxWCl",movie_add_inf:"movies_movie_add_inf__km0bd",movie_list_addinf:"movies_movie_list_addinf__Xoj+5",movie_item_addinf:"movies_movie_item_addinf__ENGof",cast_item:"movies_cast_item__99oP3",cast_text:"movies_cast_text__BWYPW",cast_list:"movies_cast_list__uSqCr"}},861:function(e,i,t){function o(e,i,t,o,n,s,_){try{var r=e[s](_),a=r.value}catch(c){return void t(c)}r.done?i(a):Promise.resolve(a).then(o,n)}function n(e){return function(){var i=this,t=arguments;return new Promise((function(n,s){var _=e.apply(i,t);function r(e){o(_,n,s,r,a,"next",e)}function a(e){o(_,n,s,r,a,"throw",e)}r(void 0)}))}}t.d(i,{Z:function(){return n}})}}]);
//# sourceMappingURL=496.718b41c7.chunk.js.map