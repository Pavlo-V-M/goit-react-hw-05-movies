"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[496],{496:function(e,i,t){t.r(i),t.d(i,{default:function(){return j}});var o=t(433),n=t(439),s=t(335),_=t(565),a=t(791),r=t(87),c=t(689),m=t(861),u=t(757),v=t.n(u),l={method:"GET",headers:{accept:"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5ZmIwZjA2NDE5YzM3N2Y5MjU1OGEyMjM2Mjc0MTQ5NSIsInN1YiI6IjYxZTZiZjI3YjdhYmI1MDAxYTI1MWZhNiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.StYavZ4LzGmhemX6cHksaIzE34BKhIiazMjEt5zPnEE")}},f=function(){var e=(0,m.Z)(v().mark((function e(i){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.themoviedb.org/3/search/movie?query=".concat(i,"&include_adult=false&language=en-US&page=1"),l).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)})));case 1:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}(),d=t(184),h="idle",p="panding",Z="rejected",I="resolved",j=function(){var e,i,t=(0,_.a)().setId,m=(0,a.useState)(""),u=(0,n.Z)(m,2),v=u[0],l=u[1],j=(0,a.useState)(null!==(e=JSON.parse(window.localStorage.getItem("searchName")))&&void 0!==e?e:""),b=(0,n.Z)(j,2),x=b[0],N=b[1],k=(0,r.lr)(""),S=(0,n.Z)(k,2),g=S[0],w=S[1],y=(0,a.useState)(null!==(i=JSON.parse(window.localStorage.getItem("moviesSearch")))&&void 0!==i?i:[]),C=(0,n.Z)(y,2),J=C[0],E=C[1];console.log(g.get("query"));var M=(0,c.TH)(),z=(0,a.useState)(h),O=(0,n.Z)(z,2),Y=O[0],W=O[1];return(0,a.useEffect)((function(){W(p),""!==x.trim()?f(x).then((function(e){E((0,o.Z)(e.results)),W(I)})).catch((function(e){console.error(e),W(Z)})):W(Z)}),[x]),(0,a.useEffect)((function(){window.localStorage.setItem("moviesSearch",JSON.stringify(J))}),[J]),(0,a.useEffect)((function(){window.localStorage.setItem("searchName",JSON.stringify(x))}),[x]),(0,d.jsxs)("div",{className:s.Z.movies,children:[(0,d.jsxs)("form",{className:s.Z.movies_form,children:[(0,d.jsx)("input",{className:s.Z.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movie name",onChange:function(e){l(e.currentTarget.value)},value:v}),(0,d.jsx)("button",{className:s.Z.btn_sub,type:"submit",onClick:function(e){e.preventDefault(),w({query:v}),N(v),l("")},children:"Search"})]}),Y===p&&(0,d.jsx)("p",{className:s.Z.cast_text,children:"Loading..."}),Y===I&&(0,d.jsx)("ul",{className:s.Z.movies_list,children:J.map((function(e){var i=e.id,o=e.title;return(0,d.jsx)("li",{className:s.Z.movies_item,onClick:function(){t(i)},children:(0,d.jsx)(r.rU,{className:s.Z.movies_link,to:"/movies/".concat(i),state:{from:M},children:o})},i)}))})]})}},335:function(e,i){i.Z={movies:"movies_movies__C2IhS",movies_form:"movies_movies_form__3llfX",movies_list:"movies_movies_list__ZnERL",movies_item:"movies_movies_item__PzG0R",movies_link:"movies_movies_link__qA01R",input:"movies_input__q8Mmu",btn_sub:"movies_btn_sub__x9hFi",movie_back_link:"movies_movie_back_link__ksJAE",movie_back:"movies_movie_back__+uJAC",movie_card:"movies_movie_card__8iCWL",movie_inf:"movies_movie_inf__TIsMQ",movie_title:"movies_movie_title__9X94c",movie_text:"movies_movie_text__Cejqn",movie_title2:"movies_movie_title2__PZhOD",movie_title3:"movies_movie_title3__Odxmw",banner_error:"movies_banner_error__bxWCl",movie_add_inf:"movies_movie_add_inf__km0bd",movie_list_addinf:"movies_movie_list_addinf__Xoj+5",movie_item_addinf:"movies_movie_item_addinf__ENGof",cast_item:"movies_cast_item__99oP3",cast_text:"movies_cast_text__BWYPW",cast_list:"movies_cast_list__uSqCr"}},861:function(e,i,t){function o(e,i,t,o,n,s,_){try{var a=e[s](_),r=a.value}catch(c){return void t(c)}a.done?i(r):Promise.resolve(r).then(o,n)}function n(e){return function(){var i=this,t=arguments;return new Promise((function(n,s){var _=e.apply(i,t);function a(e){o(_,n,s,a,r,"next",e)}function r(e){o(_,n,s,a,r,"throw",e)}a(void 0)}))}}t.d(i,{Z:function(){return n}})}}]);
//# sourceMappingURL=496.4ce3067a.chunk.js.map